<?xml version="1.0" encoding="utf-8"?>
<rdf:RDF
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:owl="http://www.w3.org/2002/07/owl#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:dcat="http://www.w3.org/ns/dcat#"
  xmlns:dct="http://purl.org/dc/terms/"
>
<dcat:Dataset rdf:about="${ g.site_url + h.url_for(controller='package',action='read',id=c.pkg_dict['name'])}">
  <foaf:homepage rdf:resource="${ g.site_url + h.url_for(controller='package',action='read',id=c.pkg_dict['name'])}"/>
  <rdfs:label>${c.pkg_dict['name']}</rdfs:label>
  <owl:sameAs rdf:resource="urn:uuid:${c.pkg_dict['id']}"/>
  <dct:title>${c.pkg_dict['title']}</dct:title>
  <dct:identifier>${c.pkg_dict['name']}</dct:identifier>
  <dct:dataDictionary>${ g.site_url + h.url_for(controller='package',action='read',id=c.pkg_dict['name'])}</dct:dataDictionary>
  <dct:description>${c.pkg_dict['notes']}</dct:description>
  <dct:issued>${pkg_dict.get('release_date','')}</dct:issued>
  <dct:modified>${pkg_dict.get('modified_date','')}</dct:modified>
  <dct:rights py:if="c.pkg_dict.get('license_url', None)" rdf:resource="${c.pkg_dict['license_url']}"/>
    <dct:publisher py:if="c.pkg_dict.get('groups','')">${c.pkg_dict['groups'][0]['title']}</dct:publisher>
<py:for each="rsc_dict in c.pkg_dict['resources']">
    <dcat:distribution>
        <dcat:Distribution>
            <dcat:accessURL rdf:resource="${ rsc_dict['url'] }"/>
            <dcat:format>${ rsc_dict['format'] }</dcat:format>
            <dcat:description>${ rsc_dict['description'] }</dcat:description>
        </dcat:Distribution>
    </dcat:distribution>
</py:for>
<py:for each="tag_dict in c.pkg_dict['tags']">
    <dcat:keyword>${ tag_dict["name"] }</dcat:keyword>
</py:for>
    <dct:coverage py:if="pkg_dict.get('temporal_coverage_from', '') or pkg_dict.get('temporal_coverage_to', '') or c.temporal_granularity">
        <dct:temporal>start=${data.get('temporal_coverage_from', '')};</py:if><py:if test="pkg_dict.get('temporal_coverage_to', '')">end=${data.get('temporal_coverage_to', '')};
        </dct:temporal>
        <dcat:granularity py:if="c.temporal_granularity">${c.temporal_granularity}</dcat:granularity>
    </dct:coverage>
    <dct:coverage py:if="c.geographical_coverage">
        <py:for each="tag,trans in c.geographical_coverage">
            <dct:spatial>${tag}, ${trans}</dct:spatial>
            <dcat:granularity>country</dcat:granularity>
        </py:for>
    </dct:coverage>
  <dct:accrualPeriodicity py:if="c.update_frequency">
    <dct:Frequency>
        ${c.update_frequency}
    </dct:Frecuency>
  </dct:accrualPeriodicity>
  <dct:creator  py:if="c.pkg_dict.get('groups','')">
    <rdf:Description>
      <foaf:name>${c.pkg_dict['groups'][0]['title']</foaf:name>
      <foaf:mbox rdf:resource="mailto:"/> <!-- TODO -->
    </rdf:Description>
  </dct:creator>
  </dcat:Dataset>
</rdf:RDF>